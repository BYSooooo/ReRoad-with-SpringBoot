<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/defaultLayout}">
<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/planner/planDetail.css}">
</th:block>

<head>
    <script>
        let planNo = null;

        function plan_delete() {
            planNo = location.search.substring(1).split("=")[1];
            $.ajax({
                url: "/deleteplan/" + planNo,
                type: "DELETE",
                success: function () {
                    location.href = "/planlist";
                }
            });
        }
    </script>
</head>
<section class="container" layout:fragment="content">
    <div id="plandiv">
        <form th:action="@{/member/plandelete/{planNo}(planNo=${plan.planNo})}"
              method="post">
            <a id="listBtn" class="btn btn-default waves-effect waves-light"
               th:href="@{/member/planlist}">목록</a>
            <input type="hidden" id="chklistCnt" name="chklistCnt" th:value="${plan.getCheckList()}">
            <input type="hidden" id="planNo" name="planNo" th:value="${plan.planNo}">
            <h2>여행 일정 플래너</h2>
            <table class="table">
                <tr id="travelTitle" class="plan">
                    <td class="default">여행이름</td>
                    <td class="userinput" th:text="${plan.travelTitle}"></td>
                    <td class="default">여행지</td>
                    <td class="userinput" th:text="${plan.spot}"></td>
                    <td class="default">여행기간</td>
                    <td class="userinput" th:text="${plan.startDate}"></td>
                    <td id="sign"> ~</td>
                    <td class="userinput" th:text="${plan.arriveDate}"></td>
                </tr>
                <tr class="plan">
                    <td id="memo" height="150px;" colspan="8"
                        th:text="${plan.memo}"></td>
                </tr>
            </table>
            <h3>체크리스트</h3>
            <div id="chkTbl">
            <span th:each="item,i : ${plan.getCheckList()}">
                <div id="left_table">
            <table class="checktable">
                <tbody id="left_chklist">
                <span th:if="${i.index}%3==0">
                    <tr th:id="${item.getCheckListNo()}">
                        <span class="unReady_tr" th:if="${item.getReady() ==0}">
        <td><img src="/images/planner/unready.png" alt="png"
                 class="isReady"></td>
        <td class="unReady" th:text="${item.getCheckListContent()}"></td>
                            <td class="empty"></td>
    </span>
     <span class="ready_tr" th:if="${item.getReady() ==1}">
        <td><img src="/images/planner/ready.png" alt="png"
                 class="isReady"></td>
        <td class="ready" th:text="${item.getCheckListContent()}"></td>
        <td class="empty"></td>
     </span>
                    </tr>
                </span>
                </tbody>
            </table>
            </div>
            <div id="center_table">
                <table class="checktable">
                    <tbody id="center_chklist">
<tr th:if="${i.index}%3==1" th:id="${item.getCheckListNo()}">
     <span class="unReady_tr" th:if="${item.getReady() ==0}">
        <td><img src="/images/planner/unready.png" alt="png"
                 class="isReady"></td>
        <td class="unReady" th:text="${item.getCheckListContent()}"></td>
         <td class="empty"></td>
    </span>
     <span class="ready_tr" th:if="${item.getReady() ==1}">
        <td><img src="/images/planner/ready.png" alt="png"
                 class="isReady"></td>
        <td class="ready" th:text="${item.getCheckListContent()}"></td>
        <td class="empty"></td>
     </span>
          </tr>
                    </tbody>

                </table>
            </div>
            <div id="right_table">
                <table class="checktable">
                    <tbody id="right_chklist">
<tr th:if="${i.index}%3==2" th:id="${item.getCheckListNo()}">
    <span class="unReady_tr" th:if="${item.getReady() ==0}">
        <td><img src="/images/planner/unready.png" alt="png"
                 class="isReady"></td>
        <td class="unReady" th:text="${item.getCheckListContent()}"></td>
        <td class="empty"></td>
    </span>
     <span class="ready_tr" th:if="${item.getReady() ==1}">
        <td><img src="/images/planner/ready.png" alt="png"
                 class="isReady"></td>
        <td class="ready" th:text="${item.getCheckListContent()}"></td>
        <td class="empty"></td>
     </span>
</tr>
                    </tbody>

                </table>
            </div>
            </span>
            </div>
            <div id="btnctl">
                <a id="modiBtn" class="btn btn-default waves-effect waves-light"
                   th:href="@{/member/planmodifyform/{planNo}(planNo=${plan.planNo})}">수정</a>
                <button id="delBtn" type="submit"
                        class="btn btn-danger waves-effect waves-light">삭제
                </button>
            </div>
        </form>
    </div>
</section>
</html>